import fmtUnit from '../_util/fmtUnit';
Component({
  props: {
    infinite: false,
    className: '',
    fillColor: '#ddd',
    frontColor: '#006EFF',
    pagerName: '',
    height: fmtUnit('100px'),
    white: false,
    max: 5,
    currentPage: 1
  },
  methods: {
    clacWidth: function clacWidth(pagerName) {
      var _this = this;

      my.createSelectorQuery().select("#" + pagerName).boundingClientRect().exec(function (ret) {
        _this.wrapWidth = ret[0].width;
      });
      return this.wrapWidth;
    },
    onScroll: function onScroll(e) {
      var infinitePageNumber = {};
      var _e$detail = e.detail,
          scrollLeft = _e$detail.scrollLeft,
          scrollWidth = _e$detail.scrollWidth;
      var viewWidth = this.clacWidth(e.currentTarget.dataset.id);
      infinitePageNumber[e.currentTarget.dataset.id] = {
        pageDeg: Math.round(scrollLeft / (scrollWidth - viewWidth) * 16) > 16 ? 16 : Math.round(scrollLeft / (scrollWidth - viewWidth) * 16)
      };
      this.setData({
        pageDeg: infinitePageNumber[e.currentTarget.dataset.id].pageDeg
      });
    }
  }
});